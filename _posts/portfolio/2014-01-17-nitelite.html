---
title: "niteLite.io"
description: ""
date: 2014-01-17 00:09:45
category: portfolio
pagination_enabled: false
layout: portfolio-page
tags: [web]
---

<!-- START OF PROJECT -->
<div id="{{ page.title | downcase | replace:' ','-' | replace:'.','-' }}">

<!-- INTRO -->
<div class="row-fluid">
  <div class="span12">
    <div class="project-intro">
      <h1>{{ page.title }}</h1>
      <p class="lead">
        <span class="muted">
          niteLite.io is my personal blog on topics outside the scope of software
          engineering.
        </span> </p>
        <div class="cover-image"> <img src="{{ site.url }}/img/screenshots/nitelite-01.png" alt="Screenshot of the homepage of niteLite.io.">
      </div>
    </div>
  </div>
</div>

<!-- SCREENSHOT and DESCRIPTION -->
<div class="row-fluid project-container">
  
  <div class="span12">
    <div class="screenshot-container right">
      <div class="landscape">
        <img src="{{ site.url }}/img/screenshots/nitelite-02.png" alt="Screenshot of a comment section of the niteLite.io website." />
      </div>
    </div>

    <div class="project-description left">
    
      <h2 class="screenshot-heading">Responsive design, <span class="muted">for ultimate compatibility across a wide range of devices.</span></h2>
      <p class="lead"></p>
      <h3>Responsive design</h3>
      <p>Using modern technologies and tools, niteLite.io has been developed with mobile devices, tablets and desktops in mind. The elements on each page will adapt to the screen size of the device being used to view the website.</p>
      <h3>Flat design</h3>
      <p>niteLite.io adopts concepts of flat design and integrates these concepts into the overall style and structure of the website. Flat design embraces the digital screen instead of seeing it as an obstacle, resulting in an intuitive design that invites interaction and participation.</p>
    </div>
  </div>
</div>

<!-- SCREENSHOT and DESCRIPTION -->
<div class="row-fluid project-container">

  <div class="span12">
    <div class="screenshot-container right">
      <div class="landscape">
        <img src="{{ site.url }}/img/screenshots/nitelite-03.png" alt="Screenshot of a comment form on the niteLite.io website."/>
      </div>
    </div>

    <div class="project-description left">
      <h2 class="screenshot-heading"><span class="muted">Life on the </span> bleeding edge</h2>
      <p class="lead">niteLite.io uses some of the most powerful, bleeding-edge tools available in order to manage, build and deploy the website to production.</p>
      <h3>Server-side JavaScript</h3>
      <p>Server-side JavaScript, using Node.js, is used to drive the business-logic of niteLite.io. Combining Node.js with Coffeescript allows for maximum efficiency in both reading and writing the code.</p>
      <h3>Statically-generated</h3>
      <p>A large portion of the content on the website is statically-generated. The files are created based on the templating and business logic defined in the codebase. <a href="https://github.com/jnordberg/wintersmith"><b>Wintersmith</b></a> then processes these files and generates a static output containing all the html files and binary assets necessary. These assets are ultimately deployed to production.</p>
    </div>
  </div>
</div>

<!-- CODE SNIPPET -->
<div class="row-fluid project-container">
  <div class="span12">
    <div class="project-code">
      <h2>Code Snippet</h2>
      
      <p class="lead">
        This is a plugin I wrote for Wintersmith. The plugin is written in Coffeescript, a language that compiles into JavaScript. This plugin examines all the articles in the ContentTree. It then builds a list of tags and associates each tag with the page that declared it. The end result is a set of tag index pages which catalogue all the articles that referenced that particular tag. Users of the plugin can specify tags for which to build indices, or to build indices for every tag used in every article!
      </p>
      
      <div class="code-sample">
        
{% highlight coffeescript linenos %}

module.exports = (env, callback) ->

  defaults =
    template: 'tags.jade' # template that renders pages
    first: 'tag/%t/index.html' # filename for first page
    filename: 'tag/%t/%d/index.html' # filename for rest of pages
    filter: [ # tags to create pages for. If empty, will create for all.
    ]
    perPage: 2 # number of articles per page

  options = env.config.tagPages or {}
  for key, value of defaults
    options[key] ?= defaults[key]

  class TagPage extends env.plugins.Page

    # tag - The raw tag string retrieved from the article's metadata
    # formatted-tag - A handleized version of the tag, to be used in urls
    # articles - the articles to render for one of the tag pages
    # pageNum - the number of this particular tag page
    constructor: (@tag, @formatted_tag, @articles, @pageNum) ->

    getFilename: ->
      if @pageNum is 1
        options.first.replace '%t', @formatted_tag
      else
        filename = options.filename.replace '%t', @formatted_tag
        filename.replace '%d', @pageNum

    getView: -> (env, locals, contents, templates, callback) ->
      template = templates[options.template]
      if not template?
        return callback new Error "unknown tags template '#{ options.template }'"

      if @articles
        ctx = {@articles, @tag, @prevPage, @nextPage}
      else
        ctx = {@tag, @prevPage, @nextPage}

      env.utils.extend ctx, locals

      template.render ctx, callback

    @retrieveListOfAllTagsUsedByArticles = (articles, options) ->
      tags = options.filter or []
      # Get a list of all tags if there are none defined through the filter
      if !tags || tags.length < 1
        for article in articles
          if article.metadata.tags
            for tag in article.metadata.tags
              if !(tags.indexOf(tag) > -1)
                tags.push tag

      return tags

    @createObjectContainingAllTagPages = (tags, articles, options) ->
      pages = {}
      for tag in tags
        pages[tag] = []
        articles_with_tag = []

        # build an array of articles containing the current iteration's tag
        for article in articles
          article_tags = article.metadata.tags
          if article_tags.indexOf(tag) > -1
            articles_with_tag.push article

        # populate pages
        numPages = Math.ceil articles_with_tag.length / options.perPage
        for i in [0...numPages]
          tag_articles = articles_with_tag.slice i * options.perPage, (i + 1) * options.perPage
          handleizedTag = tag.toLowerCase().trim().replace(/\s/g, '-').replace(/[^\w-]/g, '')
          pages[tag].push(new TagPage tag, handleizedTag, tag_articles, i + 1)

        # add references to prev/next to each page
        for page, i in pages[tag]
          page.prevPage = pages[tag][i - 1]
          page.nextPage = pages[tag][i + 1]

      return pages

    @createObjectToBeMergedWithContentTree = (tags, pages) ->
      rv = {tags:{}}
      for tag in tags
        # If there are no articles available for the tag, create a default page
        # for the tag so potential links don't break.
        if !pages[tag] || pages[tag].length < 1
          handleizedTag = tag.toLowerCase().trim().replace(/\s/g, '-').replace(/[^\w-]/g, '')
          rv.tags["#{ tag }"] = new TagPage tag, handleizedTag, null, 1
        # Else pass the content index to the page
        else
          for page in pages[tag]
            rv.tags["#{ page.tag + '-' + page.pageNum }.page"] = page

      return rv

  env.registerGenerator 'tags', (contents, callback) ->
    articles = contents['articles']._.directories.map (item) -> item.index
    articles.sort (a, b) -> b.date - a.date
    tags = TagPage.retrieveListOfAllTagsUsedByArticles(articles, options)
    pages = TagPage.createObjectContainingAllTagPages(tags, articles, options)
    rv = TagPage.createObjectToBeMergedWithContentTree(tags, pages)

    # callback with the generated contents
    callback null, rv

  env.helpers.TagPage = TagPage

  # tell the plugin manager we are done
  callback()

{% endhighlight %}
        
      </div>
    </div>
  </div>
</div>

<!-- OUTRO -->
<div class="row-fluid project-outro-container">
  <div class="span12">
    <div class="project-outro">
      <img src="{{ site.url }}/img/logos/nitelite-logo.png" alt="niteLite.io logo" class="project-logo" />
      <h2>niteLite.io</h2>
    </div>
  </div>  
</div>

</div> <!-- /END DIV ID -->

<!-- /END OF PROJECT -->
